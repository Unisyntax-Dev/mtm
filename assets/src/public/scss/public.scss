/* ==========================================================================
   Mini Task Manager — public.scss

   1) Tokens
   2) Mixins
   3) Root container .mtm
   4) Form
   5) List
   6) Icon buttons
   7) Utilities
   ========================================================================== */

/* 1) TOKENS --------------------------------------------------------------- */
$fg:               #1f2937;
$border:           #e5e7eb;
$bg-hover:         #f3f4f6;
$surface:          #ffffff;

$primary:          #2563eb;
$primary-hov:      #1d4ed8;
$primary-fg:       #ffffff;

$danger:           #ef4444;
$danger-hov:       #dc2626;
$danger-fg:        #ffffff;

$radius-sm:        6px;
$radius-md:        8px;

$sp-1:             4px;
$sp-2:             6px;
$sp-3:             8px;
$sp-4:             12px;
$sp-5:             16px;

$shadow-focus:     0 0 0 3px rgba(37, 99, 235, .35);
$shadow-focus-2:   0 0 0 3px rgba(37, 99, 235, .45);
$shadow-danger:    0 0 0 3px rgba(239, 68, 68, .40);

/* 2) MIXINS --------------------------------------------------------------- */
@mixin focus-ring($shadow: $shadow-focus) {
  outline: 2px solid transparent;
  box-shadow: $shadow;
}
@mixin button-reset {
  -webkit-tap-highlight-color: transparent;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: 1px solid transparent;
  background: transparent;
  padding: 0;
  line-height: 1;
  cursor: pointer;
  text-decoration: none;
}
@mixin icon-size($size: 16px) {
  width: $size;
  height: $size;
  display: block;
  pointer-events: none;
}

/* 3) ROOT CONTAINER ------------------------------------------------------- */
.mtm {
  max-width: 560px;
  padding: $sp-4;
  border: 1px solid $border;
  border-radius: $radius-md;
  color: $fg;
  background: $surface;

  --mtm-fg:           #{$fg};
  --mtm-border:       #{$border};
  --mtm-bg-hover:     #{$bg-hover};
  --mtm-surface:      #{$surface};

  --mtm-primary-bg:   #{$primary};
  --mtm-primary-fg:   #{$primary-fg};
  --mtm-primary-hov:  #{$primary-hov};

  --mtm-danger-bg:    #{$danger};
  --mtm-danger-fg:    #{$danger-fg};
  --mtm-danger-hov:   #{$danger-hov};
}

/* 4) FORM ----------------------------------------------------------------- */
.mtm {
  .mtm__form {
    display: grid;
    gap: $sp-3;
    margin-bottom: $sp-5;
  }

  .mtm__label { font-weight: 600; }

  .mtm__input,
  .mtm__textarea {
    width: 100%;
    padding: $sp-3;
    border: 1px solid $border;
    border-radius: $radius-sm;
    font: inherit;

    &:focus-visible { @include focus-ring(); }
  }
  .mtm__input--inline { max-width: 70%; }

  .mtm__btn {
    @include button-reset;
    padding: $sp-3 $sp-4;
    border-radius: $radius-sm;
    font-weight: 600;

    &--primary {
      background: var(--mtm-primary-bg);
      color: var(--mtm-primary-fg);
      border-color: var(--mtm-primary-bg);
      &:hover { background: var(--mtm-primary-hov); border-color: var(--mtm-primary-hov); }
      &:focus-visible { box-shadow: $shadow-focus-2; }
    }
    &--ghost {
      background: #fff;
      border-color: var(--mtm-border);
      &:hover { background: var(--mtm-bg-hover); }
    }
    &--danger {
      background: var(--mtm-danger-bg);
      color: var(--mtm-danger-fg);
      border-color: var(--mtm-danger-bg);
      &:hover { background: var(--mtm-danger-hov); border-color: var(--mtm-danger-hov); }
      &:focus-visible { box-shadow: $shadow-danger; }
    }
    &--small { padding: $sp-2 $sp-3; }
    &:disabled { opacity: .6; cursor: not-allowed; }
  }
}

/* 5) LIST ----------------------------------------------------------------- */
.mtm {
  .mtm__list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: $sp-3;
  }

  .mtm__item {
    padding: $sp-3;
    border: 1px solid var(--mtm-border);
    border-radius: $radius-sm;
    background: var(--mtm-surface);
  }

  .mtm__item-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: $sp-3;
  }

  .mtm__item-actions {
    display: inline-flex;
    gap: $sp-2;
    align-items: center;
  }

  .mtm__desc { margin-top: $sp-2; white-space: pre-wrap; }
  .mtm__date { margin-top: $sp-2; font-size: 12px; color: #666; }
  .mtm__empty { color: #888; }
}

/* 6) ICON BUTTONS  ----------------------------------------------------- */
.mtm {
  .mtm__icon { @include icon-size(16px); }

  .mtm__iconbtn {
    @include button-reset;
    width: 32px; height: 32px;
    border-radius: $radius-md;
    color: var(--mtm-fg);
    transition: background-color .15s ease, border-color .15s ease, transform .06s ease;

    &:hover  { background: var(--mtm-bg-hover); }
    &:active { transform: translateY(1px); }
    &:focus-visible { @include focus-ring(); }

    &:disabled {
      opacity: .6;
      cursor: not-allowed;
      transform: none;
    }

    &--sm { width: 28px; height: 28px; }

    &--primary {
      background: var(--mtm-primary-bg);
      color: var(--mtm-primary-fg);
      border-color: var(--mtm-primary-bg);
      &:hover        { background: var(--mtm-primary-hov); border-color: var(--mtm-primary-hov); }
      &:focus-visible{ box-shadow: $shadow-focus-2; }
    }

    &--danger {
      background: var(--mtm-danger-bg);
      color: var(--mtm-danger-fg);
      border-color: var(--mtm-danger-bg);
      &:hover        { background: var(--mtm-danger-hov); border-color: var(--mtm-danger-hov); }
      &:focus-visible{ box-shadow: $shadow-danger; }
    }

    &--ghost {
      border-color: var(--mtm-border);
      background: #fff;
      &:hover { background: var(--mtm-bg-hover); }
    }
  }
}

/* 7) UTILITIES ------------------------------------------------------------ */
.mtm .sr-only {
  position: absolute; width:1px; height:1px; margin:-1px; overflow:hidden;
  clip: rect(0,0,0,0); white-space: nowrap; border:0; padding:0;
}
